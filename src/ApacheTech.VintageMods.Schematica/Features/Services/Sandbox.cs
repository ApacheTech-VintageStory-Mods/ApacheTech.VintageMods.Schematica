namespace ApacheTech.VintageMods.Schematica.Services
{
    // {"GameVersion":"1.11.9","SizeX":5,"SizeY":12,"SizeZ":8,"BlockCodes":{"1260":"cobblestone-basalt","1145":"soil-medium-none","1493":"stonebrickslab-basalt-down","1532":"stonebrickstairs-basalt-up-east","1441":"stonebrickslab-basalt-east","1480":"stonebrickslab-basalt-up","737":"lantern-west","1273":"cobblestonestairs-basalt-up-north","1415":"stonebricks-basalt","2925":"ladder-west","1467":"stonebrickslab-basalt-west","1454":"stonebrickslab-basalt-south","1428":"stonebrickslab-basalt-north","519":"snowlayer-1","1558":"stonebrickstairs-basalt-up-south","1506":"stonebrickstairs-basalt-up-north","2549":"quern-basalt","633":"woodenaxle-ud","628":"angledgears-ed","435":"glassslab-plain-east","1545":"stonebrickstairs-basalt-down-east","635":"woodenaxle-we","1584":"stonebrickstairs-basalt-up-west","641":"windmillrotor-east"},"ItemCodes":{},"Indices":[0,1024,2048,3072,4096,5120,6144,1049600,1050624,1051648,1052672,1053696,2100224,3148800,4197376,5245952,6294528,7341056,7342080,7343104,7344128,7345152,10488832,1025,2049,3073,4097,5121,6145,7169,1049601,1050625,1051649,1052673,1053697,2099201,2100225,2101249,3147777,3148801,3149825,4196353,4197377,4198401,5244929,5245953,5246977,6293505,6294529,6295553,7341057,7342081,7343105,7344129,7345153,8390657,8392705,9439233,9441281,10487809,10488833,10489857,11536385,11537409,11538433,2,1026,2050,3074,4098,5122,6146,7170,1049602,1050626,1051650,1052674,1053698,2099202,2100226,3147778,3148802,4196354,4197378,5244930,5245954,5246978,6293506,6294530,6295554,7341058,7342082,7343106,7344130,7345154,8390658,8391682,8392706,9439234,9440258,9441282,10487810,10488834,10489858,11536386,11537410,11538434,3,1027,2051,3075,4099,5123,6147,7171,1049603,1050627,1051651,1052675,1053699,2099203,2100227,2101251,3147779,3148803,3149827,4196355,4197379,4198403,5244931,5245955,5246979,6293507,6294531,6295555,7341059,7342083,7343107,7344131,7345155,8390659,8391683,8392707,9439235,9440259,9441283,10487811,10488835,10489859,11536387,11537411,11538435,1028,2052,3076,4100,5124,6148,1049604,1050628,1051652,1052676,1053700,10488836],"BlockIds":[1260,1260,1260,1260,1145,1260,1260,1493,1493,1532,1493,1493,1441,1441,1441,1441,1441,1480,1480,1480,1480,1480,737,1145,1145,1145,1145,1260,1260,1273,1493,1415,1415,1415,1493,1415,2925,1467,1415,2925,1467,1415,2925,1467,1415,2925,1415,1415,2925,1415,1480,1415,2925,1415,1480,1454,1428,1454,1428,1454,1415,1428,1493,1493,1493,519,1145,1145,1145,1145,1260,1260,1273,1558,1415,1415,1415,1506,1415,2549,1415,633,1415,633,1415,633,1415,1415,633,1415,1480,1415,633,1415,1480,1454,633,1428,1454,633,1428,1454,628,1428,1493,1493,1493,519,1145,1145,1145,1145,1260,1260,1273,1493,1415,1415,1415,1493,1415,1441,1441,1415,435,1441,1415,1545,1441,1415,1415,1415,1415,1415,1415,1480,1415,1415,1415,1480,1454,1415,1428,1454,1415,1428,1454,635,1428,1493,1493,1493,1260,1260,1260,1260,1260,1260,1493,1493,1584,1493,1493,641],"BlockEntities":{"10488832":"!<d@[F*ROa\"TSQ+E,TfCQN.!c!<d@[F*_be\"98T3@VfsmCI<#NAINB`DKKH1DCp'DF*%QkD..NtEbSru%W--#H\"(<&@q]:eCN\"7t#&J!kBl7PeE,8rsD?U2VCghC+#'\"coEccU-","2100226":"!<d@[F*RUc\"TSQ+E,TfCNrT.[!<d@[F*_be\"98T3@VfsmCI<#NAINR$ATDZ?@UX=dCif^bDImp6DfTW-A/,(Ez!!*[RF`M@fBlZ[`Df%sP@qfgn\"TSN&!=*^hEc+9ZEW?(>!!WaDDK]T/FDl2F!=!ObCi=E:!WW3#\"pK'aDfg%#!!EdGDK'`?7ri<]A5m8[AH2]1!!*OHDg,!\"FDuAE7U]e<z$P?lbBk;1(8Rum4EbTE%Bl7P`z","3148802":"!<d@[F*RUc\"TSQ+E,TfCO8o7\\!<d@[F*_be\"98T3@VfsmCI<#NAIWj%De*Es@<cU\"/TkS*$#X<rGAhM;Bk.qYz!!!$3FEMVA6tp[2Ec5ea@:O\"hB*A88!!*=HF`M@fBlX1R!!!!","4197378":"!<d@[F*RUc\"TSQ+E,TfCOT5@]!<d@[F*_be\"98T3@VfsmCI<#NAIWj%De*Es@<cU\"/TkS*$#X<rGAhM;Bk.qYz!!!$3FEMVA6tp[2Ec5ea@:O\"hB*A88!!*=HF`M@fBlX1R!!!!","5245954":"!<d@[F*RUc\"TSQ+E,TfCOoPI^!<d@[F*_be\"98T3@VfsmCI<#NAIWj%De*Es@<cU\"/TkS*$#X<rGAhM;Bk.qYz!!!$3FEMVA6tp[2Ec5ea@:O\"hB*A88!!*=HF`M@fBlX1R!!!!","6294530":"!<d@[F*RUc\"TSQ+E,TfCP5kR_!<d@[F*_be\"98T3@VfsmCI<#NAIWj%De*Es@<cU\"/TkS*$#X<rGAhM;Bk.qYz!!!$3FEMVA6tp[2Ec5ea@:O\"hB*A88!!*=HF`M@fBlX1R!!!!","7343106":"!<d@[F*RUc\"TSQ+E,TfCPQ1[`!<d@[F*_be\"98T3@VfsmCI<#NAIWj%De*Es@<cU\"/TkS*$#X<rGAhM;Bk.qYz!!!$3FEMVA6tp[2Ec5ea@:O\"hB*A88!!*=HF`M@fBlX1R!!!!","8391682":"!<d@[F*RUc\"TSQ+E,TfCPlLda!<d@[F*_be\"98T3@VfsmCI<#NAIWj%De*Es@<cU\"/TkS*$#X<rGAhM;Bk.qYz!!!$3FEMVA6tp[2Ec5ea@:O\"hB*A88!!*=HF`M@fBlX1R!!!!","9440258":"!<d@[F*RUc\"TSQ+E,TfCQ2gmb!<d@[F*_be\"98T3@VfsmCI<#NAIWj%De*Es@<cU\"/TkS*$#X<rGAhM;Bk.qYz!!!$3FEMVA6tp[2Ec5ea@:O\"hB*A88!!*=HF`M@fBlX1R!!!!","10488834":"!<d@[F*RUc\"TSQ+E,TfCQN.!c!<d@[F*_be\"98T3@VfsmCI<#NAI`-dB5D-iB4YLlF\"Ls6!XWaUFE_YDCM@;oz!!!!\"&Ti/9DFA2Z7WNEa7U]e@DJ'%O!!!$)FEMVA6tpZAz","10488835":"!<d@[F*RXd\"TSQ+E,TfCQN.!c!<d@[F*_be\"98T3@VfsmCI<#NAIWj%De*Es@<cU\"/U(b-$#X<rGAhM;Bk.qYz!!!$3FEMVA6tp[2Ec5ea@:O\"hB*/,6!!*=HF`M@fBlX1R!!!!","10488836":"!<d@[F*R[e\"TSQ+E,TfCQN.!c!<d@[F*_be\"98T3@VfsmCI<#NAJ03$DIdTuCi\"-1FDl1OARTY%!=EmVBl$ISDJ+')!rr<$!XWaUFE_YDCM@;oz!!!!\"&Ti/9DFA2Z7WNEa7U]e@DJ'%O!!!$)FEMVA6tpZAz"},"Entities":[],"ReplaceMode":2}

    internal class Sandbox
    {
        // Save as structure file.
        internal void SaveStructureFile(string filename)
        {
            // Validate.
            var capi = ApiEx.Client;
            var blockExport = new BlockSchematic();
            var seCorner = new BlockPos(0, 0, 0).AddCopy(1, 1, 1);
            var nwCorner = new BlockPos(0, 0, 0).AddCopy(-1, -1, -1);
            blockExport.Init(capi.World.BlockAccessor);
            blockExport.AddArea(capi.World, seCorner, nwCorner);//Off by 1 in XYZ
            if (!blockExport.Pack(capi.World, seCorner)) //?
            {
                capi.ShowChatMessage("Error; can't pack for export...");
                return;
            }
            filename = Path.Combine(capi.GetOrCreateDataPath("Schematics"), filename);
            blockExport.Save(filename);
        }
    }
}